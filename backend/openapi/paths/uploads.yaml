post:
  operationId: upload-any-media
  summary: Upload a file
  tags:
    - uploads
  description: |
    This operation uploads a file to a s3 bucket.

    Based on the subtype's MIME type of the file, it will be stored in specific path.

    | MIME type | root folder |
    |:---------:|:-----------:|
    | `image/*` |  `/images`  |
  requestBody:
    required: true
    content:
      multipart/form-data:
        schema:
          type: object
          properties:
            file:
              type: string
              format: binary
        example:
          file: |
            ----WebKitFormBoundary7MA4YWxkTrZu0gW
            Content-Disposition: form-data; name="file"; filename="example.txt"
            Content-Type: text/plain

            [Contents of the file go here]
            ----WebKitFormBoundary7MA4YWxkTrZu0gW--
  responses:
    201:
      description: File uploaded
      content:
        application/json:
          schema:
            type: object
            properties:
              id:
                type: integer
              url:
                type: string
              path:
                type: string
              size:
                type: integer
              file_name:
                type: string
              uploaded_at:
                type: integer

          example:
            id: 2
            url: https://cdn.yurb.dev/images/my_image.png
            path: /images/my_image.png
            size: 28000
            file_name: my_image.png
            uploaded_at: 927102600
    400:
      $ref: ../components/responses/Error.yaml
    401:
      $ref: ../components/responses/Error_401.yaml
    500:
      $ref: ../components/responses/Error_500.yaml